@import "../../assets/css/tools/custom-media.css";

.wp-block-wi-sonx-fse-services-slider {
	/* settings hardcoded in the block: */

	--wi--services-slider--columns: 3;
	--wi--services-slider--gap: var(--wp--preset--spacing--60);

	/* helper vars: */

	--wi--services-slider--mq-columns: 1;
	--wi--services-slider--mq-base: 100%;
	--wi--services-slider--mq-available: calc(
		var(--wi--services-slider--mq-base) - var(--wi--services-slider--gap) *
			(var(--wi--services-slider--mq-columns) - 1)
	);

	.wp-block-post-template {
		overflow-x: auto;
		scroll-behavior: smooth;
		scroll-snap-type: x mandatory;
		padding: var(--wi--services-slider--gap) 0;
	}

	.wp-block-post-template-is-layout-grid.wp-block-post-template-is-layout-grid.wp-block-post-template-is-layout-grid.wp-block-post-template-is-layout-grid {
		grid-template-columns: none;
		grid-auto-columns: calc(
			var(--wi--services-slider--mq-available) /
				var(--wi--services-slider--mq-columns)
		);
	}

	.wp-block-post {
		scroll-snap-align: start;
		grid-row: 1 / span 1;
	}
}

@media (--medium-viewport) {
	.wp-block-wi-sonx-fse-services-slider {
		--wi--services-slider--mq-columns: 2; /* sensible fallback for browsers not supporting round() */

		&.is-initialized {
			.wp-block-post-template::after {
				content: "";
				grid-row: 1 / span 1;
				grid-column-end: span
					calc(var(--wi--services-slider--mq-columns) - 1);
				display: block;
				height: 100%;
				background-color: var(--wp--preset--color--off-base);

				/* TODO: add 'scroll-back' icon */
			}
		}
	}
}

@supports (width: calc(round(up, 0.5, 1) * 100%)) {
	@media (--medium-viewport) {
		.wp-block-wi-sonx-fse-services-slider {
			--wi--services-slider--mq-columns: round(
				up,
				var(--wi--services-slider--columns) / 2,
				1
			);
		}
	}
}

@media (--xlarge-viewport) {
	.wp-block-wi-sonx-fse-services-slider {
		--wi--services-slider--mq-columns: var(--wi--services-slider--columns);

		.wp-block-post {
			scroll-snap-align: center;
		}

		&.is-initialized {
			.wp-block-post-template::before {
				content: "";
				grid-row: 1 / span 1;
				display: block;
				height: 100%;
				background-color: var(--wp--preset--color--off-base);

				/* TODO: add 'scroll-forwards' icon */
			}

			.wp-block-post-template::after {
				grid-column-end: span
					calc(var(--wi--services-slider--mq-columns) - 2);
			}
		}
	}
}

@media (--huge-viewport) {
	.wp-block-wi-sonx-fse-services-slider {
		--wi--services-slider--mq-base: var(--wp--style--global--wide-size);
	}
}
